<!DOCTYPE html>
<html>
<head>
  <title>Kart</title>
  <script>
    window.onload = function() {
      var remote = require('remote')
      var currentWindow = remote.getCurrentWindow();

      try {
        var args = remote.process.argv.slice(1);
        var devArgs = args.filter(function(arg) {
          return arg.indexOf("--dev") != -1;
        });

        if (devArgs.length != 0) {
          currentWindow.openDevTools();
        }

        var path = require('path')

        module.paths.push(path.join(__dirname, '..', '..', 'app'));
        module.paths.push(path.join(__dirname, '..', '..', 'app', 'node_modules'));

        // Module paths for running atom-shell directly against the src dir
        module.paths.push(path.join(__dirname));
        module.paths.push(path.join(__dirname, 'node_modules'));

        require('coffee-script');
        require('coffee-cache').setCacheDir(path.join(__dirname, 'coffee-cache'));
        Object.defineProperty(require.extensions, '.coffee', {
          writable: false,
          value: require.extensions['.coffee']
        });
        require('app');
      }
      catch (error) {
        currentWindow.openDevTools();
        console.error(error.stack || error);
      }
   }
  </script>
</head>
<body>
</body>
</html>
